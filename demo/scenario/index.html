
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://knowledgeonwebscale.github.io/solid-web-monetization/demo/scenario/">
      
      <link rel="icon" href="../../assets/solid-emblem.svg">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Scenario - Solid Web Monetization Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#demo-scenario" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Solid Web Monetization Docs" class="md-header__button md-logo" aria-label="Solid Web Monetization Docs" data-md-component="logo">
      
  <img src="../../assets/solid-emblem.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Solid Web Monetization Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scenario
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../intro/" class="md-tabs__link md-tabs__link--active">
        Demo
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../accountant/" class="md-tabs__link">
        Components
      </a>
    </li>
  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../dissemination/" class="md-tabs__link">
      Dissemination
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../spec.html" target="_blank"" class="md-tabs__link">
      Specification
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Solid Web Monetization Docs" class="md-nav__button md-logo" aria-label="Solid Web Monetization Docs" data-md-component="logo">
      
  <img src="../../assets/solid-emblem.svg" alt="logo">

    </a>
    Solid Web Monetization Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Demo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Demo" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Demo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Scenario
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Scenario
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-setup" class="md-nav__link">
    1. Setup
  </a>
  
    <nav class="md-nav" aria-label="1. Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-create-a-content-owner-wallet" class="md-nav__link">
    1.1 Create a content owner wallet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-set-environment-variables" class="md-nav__link">
    1.2 Set environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-register-wmp-as-client-optional" class="md-nav__link">
    1.4 Register WMP as client (optional)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-start-services" class="md-nav__link">
    1.3 Start services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-create-your-solid-pod" class="md-nav__link">
    2. Create your Solid Pod
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-add-your-payment-pointer-accountant-app" class="md-nav__link">
    3. Add your payment pointer (accountant app)
  </a>
  
    <nav class="md-nav" aria-label="3. Add your payment pointer (accountant app)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-login" class="md-nav__link">
    3.1 Login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-add-payment-pointers" class="md-nav__link">
    3.2 Add payment pointers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-subscribe-to-the-wmp" class="md-nav__link">
    4. Subscribe to the WMP
  </a>
  
    <nav class="md-nav" aria-label="4. Subscribe to the WMP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-login" class="md-nav__link">
    4.1 Login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-subscribe" class="md-nav__link">
    4.2 Subscribe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-browse-to-the-microstore-app" class="md-nav__link">
    5. Browse to the microstore app
  </a>
  
    <nav class="md-nav" aria-label="5. Browse to the microstore app">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-login" class="md-nav__link">
    5.1 Login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-open-subpage-paywall" class="md-nav__link">
    5.2 Open subpage paywall
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-open-subpage-mixed-content" class="md-nav__link">
    5.3 Open subpage mixed content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-active-session-in-wmp" class="md-nav__link">
    5.4 Active session in WMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Components" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../accountant/">Accountant</a>
          
            <label for="__nav_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Accountant" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Accountant
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accountant/practical/" class="md-nav__link">
        Practical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accountant/technical/" class="md-nav__link">
        Technical
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../microstore/">Microstore</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Microstore" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Microstore
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microstore/practical/" class="md-nav__link">
        Practical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microstore/technical/" class="md-nav__link">
        Technical
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../wmp/">Web Monetization Provider</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Web Monetization Provider" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Web Monetization Provider
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wmp/practical/" class="md-nav__link">
        Practical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wmp/technical/" class="md-nav__link">
        Technical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wmp/client/" class="md-nav__link">
        Client Lib
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dissemination/" class="md-nav__link">
        Dissemination
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../spec.html" target="_blank"" class="md-nav__link">
        Specification
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="demo-scenario">Demo scenario<a class="headerlink" href="#demo-scenario" title="Permanent link">&para;</a></h1>
<p>This is a step-by-step guide through the demo scenario.</p>
<h2 id="1-setup">1. Setup<a class="headerlink" href="#1-setup" title="Permanent link">&para;</a></h2>
<p>As explained in the <a href="/solid-web-monetization/demo/intro">introduction</a>, you will need docker and git installed on you local pc.</p>
<h3 id="11-create-a-content-owner-wallet">1.1 Create a content owner wallet<a class="headerlink" href="#11-create-a-content-owner-wallet" title="Permanent link">&para;</a></h3>
<p>The content creator will need a wallet account. For that we are going to create an account on <a href="https://rafiki.money/">Rafiki Money</a>.</p>
<ul>
<li>Click SINGUP</li>
<li>Enter an email and a password (the email will be part of the payment pointer address)</li>
<li>Login with the new account</li>
<li>On the overview page you will see two important parts. The Payment Pointer, which you can copy and store for the next step.</li>
<li>The Monetization box, which you will see increase later in the demonstrator.</li>
</ul>
<p><img alt="" src="../../assets/img/guide/1.1.png" /></p>
<h3 id="12-set-environment-variables">1.2 Set environment variables<a class="headerlink" href="#12-set-environment-variables" title="Permanent link">&para;</a></h3>
<p>We will need to enter the Rafiki payment pointer from the previous step as an environment variable in the microstore service, so that it can be added in the appropriate meta tag of the HTML.</p>
<ul>
<li>Clone the repository <code>git clone https://github.com/KNowledgeOnWebScale/solid-web-monetization.git .</code></li>
<li><code>cd solid-web-monetization</code></li>
<li>Edit the <code>docker-compose.yml</code> file in the root folder.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docker-compose.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">store</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/knowledgeonwebscale/solid-web-monetization/microstore:latest</span><span class="w"></span>
<span class="w">    </span><span class="nt">pull_policy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w"></span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">store</span><span class="w"></span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.store.rule=Host(`store.localhost`)&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.store.entrypoints=web&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"></span>
<span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;PAYMENT_POINTER=$$rafiki.money/p/your@email.com&quot;</span><span class="w"> </span><span class="c1"># (1)</span><span class="w"></span>
</span><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CONFIG_VARS=PAYMENT_POINTER&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CONFIG_FILE_PATH=/app/assets&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CONFIG_FILE_NAME=config.json&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<ol>
<li><img alt="âš " class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/26a0.svg" title=":warning:" /> Don't forget to escape the <code>$</code> sign by typing <code>$$</code>!</li>
</ol>
<h3 id="14-register-wmp-as-client-optional">1.4 Register <abbr title="Web Monetization Provider">WMP</abbr> as client (optional)<a class="headerlink" href="#14-register-wmp-as-client-optional" title="Permanent link">&para;</a></h3>
<p><strong>This step is optional</strong> and only needed if you will run the components in the <code>docker-compose.yml</code> file on other endpoints/ports etc. If so, you will be required to first follow the steps in the <a href="/solid-web-monetization/wmp/practical#client-registration">practical section</a> of the <abbr title="Web Monetization Provider">WMP</abbr>.</p>
<p>The resulting <code>client_id</code> and <code>client_secret</code> can be added in the <code>docker-compose.yml</code> file here:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docker-compose.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">wmp</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/knowledgeonwebscale/solid-web-monetization/wmp:latest</span><span class="w"></span>
<span class="w">    </span><span class="nt">pull_policy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w"></span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wmp</span><span class="w"></span>
<span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.enable=true&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.wmp.rule=Host(`wmp.localhost`)&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;traefik.http.routers.wmp.entrypoints=web&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;BASE_URI=http://wmp.localhost&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;MONGO_CONNECTION_STRING=mongodb://mongodb:27017&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;REDIRECT_URI=http://wmp.localhost/auth/cb&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;REDIRECT_URI_POST_LOGOUT=http://wmp.localhost/auth/logout/cb&quot;</span><span class="w"></span>
<span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CLIENT_ID=79e3648fc184f70306e4072f3a856bb1&quot;</span><span class="w"></span>
</span><span class="hll"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;CLIENT_SECRET=2ba10ec24a3cb231ee39781bc3882d66&quot;</span><span class="w"></span>
</span></code></pre></div></td></tr></table></div>
<h3 id="13-start-services">1.3 Start services<a class="headerlink" href="#13-start-services" title="Permanent link">&para;</a></h3>
<p>Now we can finally start all services!</p>
<p><div class="highlight"><pre><span></span><code><span class="nb">cd</span> solid-web-monetization <span class="c1"># cd into the root repository folder</span>
docker compose up -d      <span class="c1"># start all services in docker-compose.yml file in detached mode</span>
</code></pre></div>
This will start all demo components on your pc.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>URL</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/solid-web-monetization/accountant">Accountant</a></td>
<td><a href="http://wallet.localhost">http://wallet.localhost</a></td>
<td>Allows you to edit your payment pointers stored in your WebID (on your Solid pod).</td>
</tr>
<tr>
<td><a href="/solid-web-monetization/wmp">Web Monetization Provider</a></td>
<td><a href="http://wmp.localhost">http://wmp.localhost</a></td>
<td>Allows you to register the <abbr title="Web Monetization Provider">WMP</abbr> in your WebID (on your Solid pod) and setup a subscription to pay the <abbr title="Web Monetization Provider">WMP</abbr>.</td>
</tr>
<tr>
<td><a href="/solid-web-monetization/microstore">Microstore</a></td>
<td><a href="http://store.localhost">http://store.localhost</a></td>
<td>Website of the content creator that have unlockable monetized content for users logged in with WebID.</td>
</tr>
<tr>
<td>Docs</td>
<td><a href="http://docs.localhost">http://docs.localhost</a></td>
<td>These docs are also hosted locally on your pc now.</td>
</tr>
</tbody>
</table>
<h2 id="2-create-your-solid-pod">2. Create your Solid Pod<a class="headerlink" href="#2-create-your-solid-pod" title="Permanent link">&para;</a></h2>
<p>For this demo you will need your own Solid pod. Since this demonstrator is hardwired to <a href="https://solidcommunity.net">https://solidcommunity.net</a>, that is where we will register our pod.</p>
<ul>
<li>Click <code>Register to get a Pod</code> on the top right of <a href="https://solidcommunity.net">the page</a>.</li>
<li>Fill out the form and press <code>Register</code>.</li>
</ul>
<p>You should now be able to login, and see your WebID URI, it will be of the form <code>https://&lt;username&gt;.solidcommunity.net/profile/card#me</code></p>
<h2 id="3-add-your-payment-pointer-accountant-app">3. Add your payment pointer (accountant app)<a class="headerlink" href="#3-add-your-payment-pointer-accountant-app" title="Permanent link">&para;</a></h2>
<p>Normally you would have a wallet account somewhere with a <a href="https://paymentpointers.org">payment pointer</a> address. To be able to pay for monetized Solid apps, you will now register that payment pointer in your WebID. We will just add an example paymnet pointer address. Internally the <abbr title="Web Monetization Provider">WMP</abbr> will be funded through other payments. (More in <a href="#4-subscribe-to-the-wmp-web-monetization-provider-app">step 4</a>)</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The part where the user pays the <abbr title="Web Monetization Provider">WMP</abbr> from his/her wallet is still mocked. It seemed impossible to do a pure browser based STREAM payment from a payment pointer at this stage, because of the <a href="/solid-web-monetization/spec.html#goals">limitations outlined in the specification</a>.</p>
</div>
<p>Now we will use the Accountant application to add a payment pointer to your Solid pod.</p>
<h3 id="31-login">3.1 Login<a class="headerlink" href="#31-login" title="Permanent link">&para;</a></h3>
<ul>
<li>Browse to <a href="http://wallet.localhost">http://wallet.localhost</a></li>
<li>Press <code>Login</code> on the top right.</li>
<li>Pick the solidcommynity.net box<br />
<img alt="" src="../../assets/img/acc_login.png" /></li>
<li>Follow the redirect and log in there with your newly created pod account</li>
</ul>
<h3 id="32-add-payment-pointers">3.2 Add payment pointers<a class="headerlink" href="#32-add-payment-pointers" title="Permanent link">&para;</a></h3>
<p>Once back in the application, open the <code>Payment pointers</code> page.</p>
<p>Now enter an example payment pointer <code>$example.my.pointer</code> in the form and click <code>Add</code>.</p>
<p><img alt="" src="../../assets/img/guide/3.pp_1.png" /></p>
<p>It will be listed once added  .</p>
<p><img alt="" src="../../assets/img/guide/3.pp_2.png" /></p>
<p>You can see the entry in your WebID profile output too:</p>
<div class="highlight"><pre><span></span><code><span class="k">@prefix</span><span class="w"> </span><span class="nn">:</span><span class="w"> </span><span class="nv">&lt;#&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">foaf:</span><span class="w"> </span><span class="nv">&lt;http://xmlns.com/foaf/0.1/&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">schema:</span><span class="w"> </span><span class="nv">&lt;http://schema.org/&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">n:</span><span class="w"> </span><span class="nv">&lt;https://paymentpointers.org/ns#&gt;</span><span class="p">.</span>

<span class="p">:</span><span class="nt">me</span>
    <span class="kt">a</span> <span class="nn">schema</span><span class="p">:</span><span class="nt">Person</span><span class="p">,</span> <span class="nn">foaf</span><span class="p">:</span><span class="nt">Person</span><span class="p">;</span>
    <span class="nn">n</span><span class="p">:</span><span class="nt">hasPaymentPointer</span> <span class="p">:</span><span class="nt">me-paymentpointer-1</span><span class="p">;</span>

<span class="p">:</span><span class="nt">me-paymentpointer-1</span>
    <span class="kt">a</span> <span class="nn">n</span><span class="p">:</span><span class="nt">InterledgerPaymentPointer</span><span class="p">;</span> 
    <span class="nn">n</span><span class="p">:</span><span class="nt">paymentPointerValue</span> <span class="s">&quot;$example.my.pointer&quot;</span><span class="p">.</span>
</code></pre></div>
<p>If you wish you can add multiple pointers, this will allow you to choose between them in your <abbr title="Web Monetization Provider">WMP</abbr> subscription later.</p>
<h2 id="4-subscribe-to-the-wmp">4. Subscribe to the <abbr title="Web Monetization Provider">WMP</abbr><a class="headerlink" href="#4-subscribe-to-the-wmp" title="Permanent link">&para;</a></h2>
<p>We will now subscribe with the <abbr title="Web Monetization Provider">WMP</abbr> application. The idea is that we subscribe and pay a monthly fee for the service. The <abbr title="Web Monetization Provider">WMP</abbr> on their part will send micropayments to any web-monetized content we browse, while logged in with our WebID.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This demonstrator works over an <a href="https://interledger.org/developer-tools/get-started/set-up/">interledger testnet</a>. This means all funds are fake and nothing of monetary value is being sent right now.</p>
</div>
<h3 id="41-login">4.1 Login<a class="headerlink" href="#41-login" title="Permanent link">&para;</a></h3>
<ul>
<li>Browse to <a href="https://wmp.localhost">https://wmp.localhost</a></li>
<li>Click <code>Login with WebID</code> on the top right.</li>
<li>You will probably not notice the redirect, since you are still logged in from before. If not, please login now.</li>
</ul>
<h3 id="42-subscribe">4.2 Subscribe<a class="headerlink" href="#42-subscribe" title="Permanent link">&para;</a></h3>
<p>Open the <code>Manage</code> page. Your registered payment pointers are now read from your WebID profile document. Select one of your registered payment pointer and click <code>Subscribe with WebID</code>.</p>
<p><img alt="" src="../../assets/img/guide/4_1.png" /></p>
<p>Two things now happen:</p>
<ul>
<li>This <abbr title="Web Monetization Provider">WMP</abbr> is written to your WebID Profile for later use.</li>
<li>A <a href="https://docs.openpayments.dev/mandates">Mandate</a> is set up following the <a href="https://openpayments.dev/">Open Payments</a> specification draft. This allows the <abbr title="Web Monetization Provider">WMP</abbr> to claim <a href="https://docs.openpayments.dev/charges">Charges</a> from your chosen payment pointer (and the wallet behind it).</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Since no wallets were found that already implement the <a href="https://openpayments.dev/">Open Payments</a> specification draft, this part is mocked. The <abbr title="Web Monetization Provider">WMP</abbr> will instead use generated accounts on <a href="https://faucet.ilpv4.dev/">ILPv4 Testnet Faucet</a>, to generate temporary accounts with fake funds, and transfer money over the <abbr title="InterLedger Protocol">ILP</abbr> testnet from there.</p>
</div>
<p>The page now shows detail on the subscription.</p>
<p><img alt="" src="../../assets/img/guide/4_2.png" /></p>
<p>You can see the entry in your WebID profile output too:</p>
<div class="highlight"><pre><span></span><code><span class="k">@prefix</span><span class="w"> </span><span class="nn">:</span><span class="w"> </span><span class="nv">&lt;#&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">foaf:</span><span class="w"> </span><span class="nv">&lt;http://xmlns.com/foaf/0.1/&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">schema:</span><span class="w"> </span><span class="nv">&lt;http://schema.org/&gt;</span><span class="p">.</span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">ns0:</span><span class="w"> </span><span class="nv">&lt;https://webmonetization.org/ns#&gt;</span><span class="p">.</span>

<span class="p">:</span><span class="nt">me</span>
    <span class="kt">a</span> <span class="nn">schema</span><span class="p">:</span><span class="nt">Person</span><span class="p">,</span> <span class="nn">foaf</span><span class="p">:</span><span class="nt">Person</span><span class="p">;</span>
    <span class="nn">ns0</span><span class="p">:</span><span class="nt">hasProvider</span> <span class="p">:</span><span class="nt">me-webmonetization-provider</span><span class="p">;</span>

<span class="p">:</span><span class="nt">me-webmonetization-provider</span> 
    <span class="kt">a</span> <span class="nn">ns0</span><span class="p">:</span><span class="nt">Provider</span><span class="p">;</span> 
    <span class="nn">ns0</span><span class="p">:</span><span class="nt">apiUrl</span> <span class="s">&quot;http://wmp.localhost&quot;</span><span class="p">.</span>
</code></pre></div>
<h2 id="5-browse-to-the-microstore-app">5. Browse to the microstore app<a class="headerlink" href="#5-browse-to-the-microstore-app" title="Permanent link">&para;</a></h2>
<p>The only thing left to do now is to browse to the <a href="/solid-web-monetization/microstore/">Microstore application</a> to view some monetized content.</p>
<ul>
<li>Browse to <a href="http://store.localhost">http://store.localhost</a></li>
<li>Open the subpages while logged out.<ul>
<li>Paywall: This example has a large paywall in front of the content.</li>
<li>Mixed content: This example has some locked premium content in between the viewable images.</li>
</ul>
</li>
</ul>
<h3 id="51-login">5.1 Login<a class="headerlink" href="#51-login" title="Permanent link">&para;</a></h3>
<p>Click <code>Login with WebID</code> on the top right.</p>
<h3 id="52-open-subpage-paywall">5.2 Open subpage paywall<a class="headerlink" href="#52-open-subpage-paywall" title="Permanent link">&para;</a></h3>
<p>Open the <code>Paywall</code> page. Now that you are logged in, the button to unlock the content is shown.</p>
<ul>
<li>Click <code>Unlock through Web Monetization</code>.</li>
<li>The paywall is hidden.</li>
<li>The state of the counter up top goes from <code>pending</code> to <code>0</code></li>
<li>Once the first payment goes through, the counter is updated.</li>
<li>Now open a new screen and browse to <a href="https://rafiki.money/login">https://rafiki.money/login</a></li>
<li>Log in with the content creator account from <a href="#12-set-environment-variables">step 1.2</a></li>
<li>Watch as the Monetization box gets updated, while the paywall page is open.  </li>
</ul>
<p><img alt="" src="../../assets/img/guide/5.2.png" /></p>
<h3 id="53-open-subpage-mixed-content">5.3 Open subpage mixed content<a class="headerlink" href="#53-open-subpage-mixed-content" title="Permanent link">&para;</a></h3>
<p>Open the <code>Mixed content</code> page. Now that you are logged in, this page automatically show the premium content (by hiding the locked banners).</p>
<ul>
<li>The state of the counter up top goes from <code>pending</code> to <code>0</code></li>
<li>Once the first payment goes through, the counter is updated.</li>
<li>Now open a new screen and browse to <a href="https://rafiki.money/login">https://rafiki.money/login</a></li>
<li>Log in with the content creator account from <a href="#12-set-environment-variables">step 1.2</a></li>
<li>Watch as the Monetization box gets updated, while the mixed content page is open.  </li>
</ul>
<p><img alt="" src="../../assets/img/guide/5.3.png" /></p>
<h3 id="54-active-session-in-wmp">5.4 Active session in <abbr title="Web Monetization Provider">WMP</abbr><a class="headerlink" href="#54-active-session-in-wmp" title="Permanent link">&para;</a></h3>
<p>In the <abbr title="Web Monetization Provider">WMP</abbr> you can also see that a session is active.</p>
<ul>
<li>Browse to <a href="http://wmp.localhost">http://wmp.localhost</a></li>
<li>Login if not logged in</li>
<li>Open the <code>Manage</code> page</li>
<li>Scroll to the end to the <code>Active sessions</code> section
  <img alt="" src="../../assets/img/guide/5.4.png" /></li>
</ul>
<p><em>This concludes the demonstrator scenario.</em></p>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../intro/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        
        <a href="../../accountant/" class="md-footer__link md-footer__link--next" aria-label="Next: Solid Accountant" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Solid Accountant
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/KNowledgeOnWebScale/solid-web-monetization" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.instant", "navigation.indexes", "toc.integrate", "navigation.top", "search", "search.suggest", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>